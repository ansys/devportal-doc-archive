{"parents": [{"link": "../../", "title": "Examples"}, {"link": "../", "title": "HFSS 3D Layout examples"}], "prev": {"link": "../HFSS3DLayout_Via/", "title": "HFSS 3D Layout: parametric via analysis"}, "next": {"link": "../../02-SBR+/", "title": "SBR+ examples"}, "title": "HFSS: 3D Components", "meta": null, "body": "<div class=\"sphx-glr-download-link-note admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Click <a class=\"reference internal\" href=\"#sphx-glr-download-examples-02-hfss3dlayout-hfss3dcomponent-py\"><span class=\"std std-ref\">here</span></a>\nto download the full example code</p>\n</div>\n<section class=\"sphx-glr-example-title\" id=\"hfss-3d-components\">\n<span id=\"sphx-glr-examples-02-hfss3dlayout-hfss3dcomponent-py\"></span><h1>HFSS: 3D Components<a class=\"headerlink\" href=\"#hfss-3d-components\" title=\"Permalink to this heading\">#</a></h1>\n<p>This example shows how you can use PyAEDT to place 3D Components in Hfss and in Hfss 3D Layout.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">pyaedt</span>\n</pre></div>\n</div>\n<section id=\"set-non-graphical-mode\">\n<h2>Set non-graphical mode<a class=\"headerlink\" href=\"#set-non-graphical-mode\" title=\"Permalink to this heading\">#</a></h2>\n<p>Set non-graphical mode. <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;PYAEDT_NON_GRAPHICAL&quot;</span></code> is needed to generate\ndocumentation only.\nYou can set <code class=\"docutils literal notranslate\"><span class=\"pre\">non_graphical</span></code> either to <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">non_graphical</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">getenv</span><span class=\"p\">(</span><span class=\"s2\">&quot;PYAEDT_NON_GRAPHICAL&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;False&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">()</span> <span class=\"ow\">in</span> <span class=\"p\">(</span><span class=\"s2\">&quot;true&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;t&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"common-properties\">\n<h2>Common Properties<a class=\"headerlink\" href=\"#common-properties\" title=\"Permalink to this heading\">#</a></h2>\n<p>Set common properties.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">trace_width</span> <span class=\"o\">=</span> <span class=\"mf\">0.6</span>\n<span class=\"n\">trace_length</span> <span class=\"o\">=</span> <span class=\"mi\">30</span>\n<span class=\"n\">diel_height</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;121mil&quot;</span>\n<span class=\"n\">sig_height</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;5mil&quot;</span>\n<span class=\"n\">max_steps</span> <span class=\"o\">=</span> <span class=\"mi\">3</span>\n<span class=\"n\">freq</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;3GHz&quot;</span>\n<span class=\"n\">desktop_version</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;2022.2&quot;</span>\n<span class=\"n\">new_session</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n</pre></div>\n</div>\n</section>\n<section id=\"d-component-definition\">\n<h2>3D Component Definition<a class=\"headerlink\" href=\"#d-component-definition\" title=\"Permalink to this heading\">#</a></h2>\n<p>File to be used in the example</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">component3d</span> <span class=\"o\">=</span> <span class=\"n\">pyaedt</span><span class=\"o\">.</span><span class=\"n\">downloads</span><span class=\"o\">.</span><span class=\"n\">download_file</span><span class=\"p\">(</span><span class=\"s2\">&quot;component_3d&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;SMA_RF_Jack.a3dcomp&quot;</span><span class=\"p\">,)</span>\n</pre></div>\n</div>\n</section>\n</section>\n<section id=\"hfss-example\">\n<h1>Hfss Example<a class=\"headerlink\" href=\"#hfss-example\" title=\"Permalink to this heading\">#</a></h1>\n<p>This example will create a stackup in Hfss place a 3d component, build a ground plane, a trace,\ncreate excitation and solve it in Hfss.</p>\n<section id=\"launch-hfss\">\n<h2>Launch Hfss<a class=\"headerlink\" href=\"#launch-hfss\" title=\"Permalink to this heading\">#</a></h2>\n<p>Launch HFSS application</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">hfss</span> <span class=\"o\">=</span> <span class=\"n\">pyaedt</span><span class=\"o\">.</span><span class=\"n\">Hfss</span><span class=\"p\">(</span><span class=\"n\">new_desktop_session</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">specified_version</span><span class=\"o\">=</span><span class=\"s2\">&quot;2022.2&quot;</span><span class=\"p\">,</span> <span class=\"n\">non_graphical</span><span class=\"o\">=</span><span class=\"n\">non_graphical</span><span class=\"p\">)</span>\n\n<span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">solution_type</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;Terminal&quot;</span>\n</pre></div>\n</div>\n</section>\n<section id=\"insert-3d-component\">\n<h2>Insert 3d Component<a class=\"headerlink\" href=\"#insert-3d-component\" title=\"Permalink to this heading\">#</a></h2>\n<p>To insert a 3d component we need to read parameters and then import in Hfss.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">comp_param</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">get_components3d_vars</span><span class=\"p\">(</span><span class=\"n\">component3d</span><span class=\"p\">)</span>\n<span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">primitives</span><span class=\"o\">.</span><span class=\"n\">insert_3d_component</span><span class=\"p\">(</span><span class=\"n\">component3d</span><span class=\"p\">,</span> <span class=\"n\">comp_param</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>&lt;pyaedt.modeler.cad.components_3d.UserDefinedComponent object at 0x0000019A834A6CA0&gt;\n</pre></div>\n</div>\n</section>\n<section id=\"add-a-new-stackup\">\n<h2>Add a new Stackup<a class=\"headerlink\" href=\"#add-a-new-stackup\" title=\"Permalink to this heading\">#</a></h2>\n<p>Pyaedt has a Stackup class which allows to parametrize stacked structures.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">stackup</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">add_stackup_3d</span><span class=\"p\">()</span>\n<span class=\"n\">s1</span> <span class=\"o\">=</span> <span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">add_signal_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;L1&quot;</span><span class=\"p\">,</span> <span class=\"n\">thickness</span><span class=\"o\">=</span><span class=\"n\">sig_height</span><span class=\"p\">)</span>\n<span class=\"n\">d1</span> <span class=\"o\">=</span> <span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">add_dielectric_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;D1&quot;</span><span class=\"p\">,</span> <span class=\"n\">thickness</span><span class=\"o\">=</span><span class=\"n\">diel_height</span><span class=\"p\">)</span>\n<span class=\"n\">g1</span> <span class=\"o\">=</span> <span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">add_ground_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;G1&quot;</span><span class=\"p\">,</span> <span class=\"n\">thickness</span><span class=\"o\">=</span><span class=\"n\">sig_height</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"define-stackup-extensions\">\n<h2>Define stackup extensions<a class=\"headerlink\" href=\"#define-stackup-extensions\" title=\"Permalink to this heading\">#</a></h2>\n<p>Define stackup elevation and size. Defines also the stackup origin.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">start_position</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;-131mil&quot;</span>\n<span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">dielectric_width</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;20mm&quot;</span>\n<span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">dielectric_length</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;40mm&quot;</span>\n<span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">dielectric_y_position</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;-dielectric_width/2&quot;</span>\n<span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">dielectric_x_position</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;-dielectric_length/4&quot;</span>\n</pre></div>\n</div>\n</section>\n<section id=\"padstack-definition\">\n<h2>Padstack Definition<a class=\"headerlink\" href=\"#padstack-definition\" title=\"Permalink to this heading\">#</a></h2>\n<p>Padstacks are needed to create a clearance around 3d component since\nintersections are not allowed. There will be 1 padstack for Gnd and 1 for pin.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">p1</span> <span class=\"o\">=</span> <span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">add_padstack</span><span class=\"p\">(</span><span class=\"s2\">&quot;gnd_via&quot;</span><span class=\"p\">,</span> <span class=\"n\">material</span><span class=\"o\">=</span><span class=\"s2\">&quot;cloned_copper&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">set_start_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;L1&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">set_stop_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;G1&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">set_all_antipad_value</span><span class=\"p\">(</span><span class=\"mf\">1.3</span><span class=\"p\">)</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">set_all_pad_value</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">num_sides</span> <span class=\"o\">=</span> <span class=\"mi\">8</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">add_via</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mf\">3.2</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">3.2</span><span class=\"p\">)</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">add_via</span><span class=\"p\">(</span><span class=\"o\">-</span><span class=\"mf\">3.2</span><span class=\"p\">,</span> <span class=\"mf\">3.2</span><span class=\"p\">)</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">add_via</span><span class=\"p\">(</span><span class=\"mf\">3.2</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">3.2</span><span class=\"p\">)</span>\n<span class=\"n\">p1</span><span class=\"o\">.</span><span class=\"n\">add_via</span><span class=\"p\">(</span><span class=\"mf\">3.2</span><span class=\"p\">,</span> <span class=\"mf\">3.2</span><span class=\"p\">)</span>\n<span class=\"n\">p2</span> <span class=\"o\">=</span> <span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">add_padstack</span><span class=\"p\">(</span><span class=\"s2\">&quot;signal_via&quot;</span><span class=\"p\">,</span> <span class=\"n\">material</span><span class=\"o\">=</span><span class=\"s2\">&quot;cloned_copper&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">p2</span><span class=\"o\">.</span><span class=\"n\">set_start_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;L1&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">p2</span><span class=\"o\">.</span><span class=\"n\">set_stop_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;G1&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">p2</span><span class=\"o\">.</span><span class=\"n\">set_all_antipad_value</span><span class=\"p\">(</span><span class=\"mf\">0.7</span><span class=\"p\">)</span>\n<span class=\"n\">p2</span><span class=\"o\">.</span><span class=\"n\">set_all_pad_value</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"n\">p2</span><span class=\"o\">.</span><span class=\"n\">padstacks_by_layer</span><span class=\"p\">[</span><span class=\"s2\">&quot;L1&quot;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">pad_radius</span> <span class=\"o\">=</span> <span class=\"mf\">0.3048</span>\n<span class=\"n\">p2</span><span class=\"o\">.</span><span class=\"n\">add_via</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>&lt;pyaedt.modeler.cad.object3d.Object3d object at 0x0000019A8CFB2D00&gt;\n</pre></div>\n</div>\n</section>\n<section id=\"trace-definition\">\n<h2>Trace Definition<a class=\"headerlink\" href=\"#trace-definition\" title=\"Permalink to this heading\">#</a></h2>\n<p>The trace will connect the pin to the port on layer L1.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">t1</span> <span class=\"o\">=</span> <span class=\"n\">s1</span><span class=\"o\">.</span><span class=\"n\">add_trace</span><span class=\"p\">(</span><span class=\"n\">trace_width</span><span class=\"p\">,</span> <span class=\"n\">trace_length</span><span class=\"p\">)</span>\n<span class=\"n\">rect1</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">primitives</span><span class=\"o\">.</span><span class=\"n\">create_rectangle</span><span class=\"p\">(</span><span class=\"n\">csPlane</span><span class=\"o\">=</span><span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">CoordinateSystemPlane</span><span class=\"o\">.</span><span class=\"n\">YZPlane</span><span class=\"p\">,</span>\n                                                 <span class=\"n\">position</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;0.75*dielectric_length&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;-5*&quot;</span> <span class=\"o\">+</span> <span class=\"n\">t1</span><span class=\"o\">.</span><span class=\"n\">width</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;0mm&quot;</span><span class=\"p\">],</span>\n                                                 <span class=\"n\">dimension_list</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;15*&quot;</span> <span class=\"o\">+</span> <span class=\"n\">t1</span><span class=\"o\">.</span><span class=\"n\">width</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;-3*&quot;</span> <span class=\"o\">+</span> <span class=\"n\">stackup</span><span class=\"o\">.</span><span class=\"n\">thickness</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">])</span>\n<span class=\"n\">p1</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">create_wave_port_from_sheet</span><span class=\"p\">(</span><span class=\"n\">sheet</span><span class=\"o\">=</span><span class=\"n\">rect1</span><span class=\"p\">,</span> <span class=\"n\">terminal_references</span><span class=\"o\">=</span><span class=\"s2\">&quot;G1&quot;</span><span class=\"p\">,</span> <span class=\"n\">portname</span><span class=\"o\">=</span><span class=\"s2\">&quot;P1&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"set-simulation-boundaries\">\n<h2>Set Simulation Boundaries<a class=\"headerlink\" href=\"#set-simulation-boundaries\" title=\"Permalink to this heading\">#</a></h2>\n<p>Define regione and simulation boundaries.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">change_material_override</span><span class=\"p\">(</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"n\">region</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">primitives</span><span class=\"o\">.</span><span class=\"n\">create_region</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">100</span><span class=\"p\">])</span>\n<span class=\"n\">sheets</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">i</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"n\">region</span><span class=\"o\">.</span><span class=\"n\">faces</span><span class=\"p\">]</span>\n<span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">assign_radiation_boundary_to_faces</span><span class=\"p\">(</span><span class=\"n\">sheets</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>&lt;pyaedt.modules.Boundary.BoundaryObject object at 0x0000019AFA4A99A0&gt;\n</pre></div>\n</div>\n</section>\n<section id=\"create-setup\">\n<h2>Create Setup<a class=\"headerlink\" href=\"#create-setup\" title=\"Permalink to this heading\">#</a></h2>\n<p>Iterations will be reduced to reduce simulation time.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">setup1</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">create_setup</span><span class=\"p\">()</span>\n<span class=\"n\">sweep1</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">create_linear_count_sweep</span><span class=\"p\">(</span><span class=\"n\">setup1</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;GHz&quot;</span><span class=\"p\">,</span> <span class=\"mf\">0.01</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">1601</span><span class=\"p\">,</span> <span class=\"n\">sweep_type</span><span class=\"o\">=</span><span class=\"s2\">&quot;Interpolating&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">setup1</span><span class=\"o\">.</span><span class=\"n\">props</span><span class=\"p\">[</span><span class=\"s2\">&quot;Frequency&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">freq</span>\n<span class=\"n\">setup1</span><span class=\"o\">.</span><span class=\"n\">props</span><span class=\"p\">[</span><span class=\"s2\">&quot;MaximumPasses&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">max_steps</span>\n</pre></div>\n</div>\n</section>\n<section id=\"solve-setup\">\n<h2>Solve Setup<a class=\"headerlink\" href=\"#solve-setup\" title=\"Permalink to this heading\">#</a></h2>\n<p>Save the project first and then solve the setup.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">save_project</span><span class=\"p\">()</span>\n<span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">analyze_nominal</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>True\n</pre></div>\n</div>\n</section>\n<section id=\"plot-results\">\n<h2>Plot results<a class=\"headerlink\" href=\"#plot-results\" title=\"Permalink to this heading\">#</a></h2>\n<p>Plot the results when analysis is completed.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">traces</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">get_traces_for_plot</span><span class=\"p\">(</span><span class=\"n\">category</span><span class=\"o\">=</span><span class=\"s2\">&quot;S&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">solutions</span> <span class=\"o\">=</span> <span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">get_solution_data</span><span class=\"p\">(</span><span class=\"n\">traces</span><span class=\"p\">)</span>\n<span class=\"n\">solutions</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">traces</span><span class=\"p\">,</span> <span class=\"n\">math_formula</span><span class=\"o\">=</span><span class=\"s2\">&quot;db20&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<img src=\"../../_images/sphx_glr_Hfss3DComponent_001.png\" srcset=\"../../_images/sphx_glr_Hfss3DComponent_001.png\" alt=\"Simulation Results Plot\" class = \"sphx-glr-single-img\"/><div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>&lt;Figure size 2000x1000 with 1 Axes&gt;\n</pre></div>\n</div>\n</section>\n</section>\n<section id=\"hfss-3d-layout-example\">\n<h1>Hfss 3D Layout Example<a class=\"headerlink\" href=\"#hfss-3d-layout-example\" title=\"Permalink to this heading\">#</a></h1>\n<p>Previous example will be repeated this time in Hfss 3d Layout.\nSmall differences are expected in layout but results should be similar.</p>\n<section id=\"launch-hfss3dlayout\">\n<h2>Launch Hfss3dLayout<a class=\"headerlink\" href=\"#launch-hfss3dlayout\" title=\"Permalink to this heading\">#</a></h2>\n<p>Launch HFSS3dLayout application</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">h3d</span> <span class=\"o\">=</span> <span class=\"n\">pyaedt</span><span class=\"o\">.</span><span class=\"n\">Hfss3dLayout</span><span class=\"p\">(</span><span class=\"n\">new_desktop_session</span><span class=\"o\">=</span><span class=\"n\">new_session</span><span class=\"p\">,</span> <span class=\"n\">specified_version</span><span class=\"o\">=</span><span class=\"n\">desktop_version</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"add-stackup-layers\">\n<h2>Add stackup layers<a class=\"headerlink\" href=\"#add-stackup-layers\" title=\"Permalink to this heading\">#</a></h2>\n<p>Add stackup layers.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">l1</span> <span class=\"o\">=</span> <span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">layers</span><span class=\"o\">.</span><span class=\"n\">add_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;L1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;signal&quot;</span><span class=\"p\">,</span> <span class=\"n\">thickness</span><span class=\"o\">=</span><span class=\"n\">sig_height</span><span class=\"p\">)</span>\n<span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">layers</span><span class=\"o\">.</span><span class=\"n\">add_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;diel&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;dielectric&quot;</span><span class=\"p\">,</span> <span class=\"n\">thickness</span><span class=\"o\">=</span><span class=\"n\">diel_height</span><span class=\"p\">,</span> <span class=\"n\">material</span><span class=\"o\">=</span><span class=\"s2\">&quot;FR4_epoxy&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">layers</span><span class=\"o\">.</span><span class=\"n\">add_layer</span><span class=\"p\">(</span><span class=\"s2\">&quot;G1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;signal&quot;</span><span class=\"p\">,</span> <span class=\"n\">thickness</span><span class=\"o\">=</span><span class=\"n\">sig_height</span><span class=\"p\">,</span> <span class=\"n\">isnegative</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>&lt;pyaedt.modules.LayerStackup.Layer object at 0x0000019A8EF8BDF0&gt;\n</pre></div>\n</div>\n</section>\n<section id=\"place-3d-component\">\n<h2>Place 3d Component<a class=\"headerlink\" href=\"#place-3d-component\" title=\"Permalink to this heading\">#</a></h2>\n<p>Place a 3d component by specifying the .a3dcomp file path.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">comp</span> <span class=\"o\">=</span> <span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">place_3d_component</span><span class=\"p\">(</span>\n    <span class=\"n\">component_path</span><span class=\"o\">=</span><span class=\"n\">component3d</span><span class=\"p\">,</span> <span class=\"n\">number_of_terminals</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">placement_layer</span><span class=\"o\">=</span><span class=\"s2\">&quot;G1&quot;</span><span class=\"p\">,</span> <span class=\"n\">component_name</span><span class=\"o\">=</span><span class=\"s2\">&quot;my_connector&quot;</span><span class=\"p\">,</span>\n    <span class=\"n\">pos_x</span><span class=\"o\">=</span><span class=\"mf\">0.000</span><span class=\"p\">,</span> <span class=\"n\">pos_y</span><span class=\"o\">=</span><span class=\"mf\">0.000</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"create-signal-net-and-ground-planes\">\n<h2>Create signal net and ground planes<a class=\"headerlink\" href=\"#create-signal-net-and-ground-planes\" title=\"Permalink to this heading\">#</a></h2>\n<p>Create a signal net and ground planes.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">h3d</span><span class=\"p\">[</span><span class=\"s2\">&quot;len&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">trace_length</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"s2\">&quot;mm&quot;</span>\n<span class=\"n\">h3d</span><span class=\"p\">[</span><span class=\"s2\">&quot;w1&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">trace_width</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"s2\">&quot;mm&quot;</span>\n<span class=\"n\">line</span> <span class=\"o\">=</span> <span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">create_line</span><span class=\"p\">(</span><span class=\"s2\">&quot;L1&quot;</span><span class=\"p\">,</span> <span class=\"p\">[[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">],</span> <span class=\"p\">[</span><span class=\"s2\">&quot;len&quot;</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">]],</span> <span class=\"n\">lw</span><span class=\"o\">=</span><span class=\"s2\">&quot;w1&quot;</span><span class=\"p\">,</span> <span class=\"n\">netname</span><span class=\"o\">=</span><span class=\"s2\">&quot;microstrip&quot;</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;microstrip&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">create_edge_port</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"p\">,</span> <span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"p\">[</span><span class=\"n\">line</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">top_edge_x</span><span class=\"p\">,</span> <span class=\"n\">iswave</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">wave_horizontal_extension</span><span class=\"o\">=</span><span class=\"mi\">15</span><span class=\"p\">,</span> <span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>&lt;pyaedt.modules.Boundary.BoundaryObject3dLayout object at 0x0000019A8EFAED90&gt;\n</pre></div>\n</div>\n</section>\n<section id=\"create-void-on-ground-plane-for-pin\">\n<h2>Create void on Ground plane for pin<a class=\"headerlink\" href=\"#create-void-on-ground-plane-for-pin\" title=\"Permalink to this heading\">#</a></h2>\n<p>Create a void.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">modeler</span><span class=\"o\">.</span><span class=\"n\">create_circle</span><span class=\"p\">(</span><span class=\"s2\">&quot;G1&quot;</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">0.5</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>&lt;pyaedt.modeler.pcb.object3dlayout.Circle3dLayout object at 0x0000019A8CC65C70&gt;\n</pre></div>\n</div>\n</section>\n<section id=\"id1\">\n<h2>Create Setup<a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this heading\">#</a></h2>\n<p>Iterations will be reduced to reduce simulation time.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">set_meshing_settings</span><span class=\"p\">(</span><span class=\"n\">mesh_method</span><span class=\"o\">=</span><span class=\"s2\">&quot;PhiPlus&quot;</span><span class=\"p\">,</span> <span class=\"n\">enable_intersections_check</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">edit_hfss_extents</span><span class=\"p\">(</span><span class=\"n\">diel_extent_horizontal_padding</span><span class=\"o\">=</span><span class=\"s2\">&quot;0.2&quot;</span><span class=\"p\">,</span> <span class=\"n\">air_vertical_positive_padding</span><span class=\"o\">=</span><span class=\"s2\">&quot;0&quot;</span><span class=\"p\">,</span>\n                      <span class=\"n\">air_vertical_negative_padding</span><span class=\"o\">=</span><span class=\"s2\">&quot;2&quot;</span><span class=\"p\">,</span> <span class=\"n\">airbox_values_as_dim</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"n\">setup1</span> <span class=\"o\">=</span> <span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">create_setup</span><span class=\"p\">()</span>\n<span class=\"n\">sweep1</span> <span class=\"o\">=</span> <span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">create_linear_count_sweep</span><span class=\"p\">(</span><span class=\"n\">setup1</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"s2\">&quot;GHz&quot;</span><span class=\"p\">,</span> <span class=\"mf\">0.01</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">,</span> <span class=\"mi\">1601</span><span class=\"p\">,</span> <span class=\"n\">sweep_type</span><span class=\"o\">=</span><span class=\"s2\">&quot;Interpolating&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">setup1</span><span class=\"o\">.</span><span class=\"n\">props</span><span class=\"p\">[</span><span class=\"s2\">&quot;AdaptiveSettings&quot;</span><span class=\"p\">][</span><span class=\"s2\">&quot;SingleFrequencyDataList&quot;</span><span class=\"p\">][</span><span class=\"s2\">&quot;AdaptiveFrequencyData&quot;</span><span class=\"p\">][</span><span class=\"s2\">&quot;AdaptiveFrequency&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">freq</span>\n<span class=\"n\">setup1</span><span class=\"o\">.</span><span class=\"n\">props</span><span class=\"p\">[</span><span class=\"s2\">&quot;AdaptiveSettings&quot;</span><span class=\"p\">][</span><span class=\"s2\">&quot;SingleFrequencyDataList&quot;</span><span class=\"p\">][</span><span class=\"s2\">&quot;AdaptiveFrequencyData&quot;</span><span class=\"p\">][</span><span class=\"s2\">&quot;MaxPasses&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">max_steps</span>\n</pre></div>\n</div>\n</section>\n<section id=\"id2\">\n<h2>Solve Setup<a class=\"headerlink\" href=\"#id2\" title=\"Permalink to this heading\">#</a></h2>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">analyze_nominal</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>True\n</pre></div>\n</div>\n</section>\n<section id=\"id3\">\n<h2>Plot results<a class=\"headerlink\" href=\"#id3\" title=\"Permalink to this heading\">#</a></h2>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">traces</span> <span class=\"o\">=</span> <span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">get_traces_for_plot</span><span class=\"p\">(</span><span class=\"n\">category</span><span class=\"o\">=</span><span class=\"s2\">&quot;S&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">solutions</span> <span class=\"o\">=</span> <span class=\"n\">h3d</span><span class=\"o\">.</span><span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">get_solution_data</span><span class=\"p\">(</span><span class=\"n\">traces</span><span class=\"p\">)</span>\n<span class=\"n\">solutions</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">traces</span><span class=\"p\">,</span> <span class=\"n\">math_formula</span><span class=\"o\">=</span><span class=\"s2\">&quot;db20&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">save_project</span><span class=\"p\">()</span>\n<span class=\"n\">hfss</span><span class=\"o\">.</span><span class=\"n\">release_desktop</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<img src=\"../../_images/sphx_glr_Hfss3DComponent_002.png\" srcset=\"../../_images/sphx_glr_Hfss3DComponent_002.png\" alt=\"Simulation Results Plot\" class = \"sphx-glr-single-img\"/><div class=\"sphx-glr-script-out highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>True\n</pre></div>\n</div>\n<p class=\"sphx-glr-timing\"><strong>Total running time of the script:</strong> ( 3 minutes  27.784 seconds)</p>\n<div class=\"sphx-glr-footer sphx-glr-footer-example docutils container\" id=\"sphx-glr-download-examples-02-hfss3dlayout-hfss3dcomponent-py\">\n<div class=\"sphx-glr-download sphx-glr-download-python docutils container\">\n<p><a class=\"reference download internal\" download=\"\" href=\"../../../_downloads/36a84ecc0960ff852877e057609bb96c/Hfss3DComponent.py\"><code class=\"xref download docutils literal notranslate\"><span class=\"pre\">Download</span> <span class=\"pre\">Python</span> <span class=\"pre\">source</span> <span class=\"pre\">code:</span> <span class=\"pre\">Hfss3DComponent.py</span></code></a></p>\n</div>\n<div class=\"sphx-glr-download sphx-glr-download-jupyter docutils container\">\n<p><a class=\"reference download internal\" download=\"\" href=\"../../../_downloads/777c5aa8ce1a4d7c23f2389f89fcdf0c/Hfss3DComponent.ipynb\"><code class=\"xref download docutils literal notranslate\"><span class=\"pre\">Download</span> <span class=\"pre\">Jupyter</span> <span class=\"pre\">notebook:</span> <span class=\"pre\">Hfss3DComponent.ipynb</span></code></a></p>\n</div>\n</div>\n<p class=\"sphx-glr-signature\"><a class=\"reference external\" href=\"https://sphinx-gallery.github.io\">Gallery generated by Sphinx-Gallery</a></p>\n</section>\n</section>\n", "metatags": "<meta name=\"generator\" content=\"Docutils 0.19: https://docutils.sourceforge.io/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["examples/02-SBR+/index", "SBR+ examples", "N", "next"], ["examples/02-HFSS3DLayout/HFSS3DLayout_Via", "HFSS 3D Layout: parametric via analysis", "P", "previous"]], "sourcename": "examples/02-HFSS3DLayout/Hfss3DComponent.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">HFSS: 3D Components</a><ul>\n<li><a class=\"reference internal\" href=\"#set-non-graphical-mode\">Set non-graphical mode</a></li>\n<li><a class=\"reference internal\" href=\"#common-properties\">Common Properties</a></li>\n<li><a class=\"reference internal\" href=\"#d-component-definition\">3D Component Definition</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#hfss-example\">Hfss Example</a><ul>\n<li><a class=\"reference internal\" href=\"#launch-hfss\">Launch Hfss</a></li>\n<li><a class=\"reference internal\" href=\"#insert-3d-component\">Insert 3d Component</a></li>\n<li><a class=\"reference internal\" href=\"#add-a-new-stackup\">Add a new Stackup</a></li>\n<li><a class=\"reference internal\" href=\"#define-stackup-extensions\">Define stackup extensions</a></li>\n<li><a class=\"reference internal\" href=\"#padstack-definition\">Padstack Definition</a></li>\n<li><a class=\"reference internal\" href=\"#trace-definition\">Trace Definition</a></li>\n<li><a class=\"reference internal\" href=\"#set-simulation-boundaries\">Set Simulation Boundaries</a></li>\n<li><a class=\"reference internal\" href=\"#create-setup\">Create Setup</a></li>\n<li><a class=\"reference internal\" href=\"#solve-setup\">Solve Setup</a></li>\n<li><a class=\"reference internal\" href=\"#plot-results\">Plot results</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#hfss-3d-layout-example\">Hfss 3D Layout Example</a><ul>\n<li><a class=\"reference internal\" href=\"#launch-hfss3dlayout\">Launch Hfss3dLayout</a></li>\n<li><a class=\"reference internal\" href=\"#add-stackup-layers\">Add stackup layers</a></li>\n<li><a class=\"reference internal\" href=\"#place-3d-component\">Place 3d Component</a></li>\n<li><a class=\"reference internal\" href=\"#create-signal-net-and-ground-planes\">Create signal net and ground planes</a></li>\n<li><a class=\"reference internal\" href=\"#create-void-on-ground-plane-for-pin\">Create void on Ground plane for pin</a></li>\n<li><a class=\"reference internal\" href=\"#id1\">Create Setup</a></li>\n<li><a class=\"reference internal\" href=\"#id2\">Solve Setup</a></li>\n<li><a class=\"reference internal\" href=\"#id3\">Plot results</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "examples/02-HFSS3DLayout/Hfss3DComponent", "sidebars": ["search-field.html", "sidebar-nav-bs.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "theme_show_toc_level": 1, "theme_logo": {}}