{"parents": [{"link": "../", "title": "Getting started"}], "prev": {"link": "../Installation/", "title": "Installation"}, "next": {"link": "../../User_guide/", "title": "User guide"}, "title": "Client-server", "meta": null, "body": "<section id=\"client-server\">\n<h1>Client-server<a class=\"headerlink\" href=\"#client-server\" title=\"Permalink to this heading\">#</a></h1>\n<p>You can launch PyAEDT on a remote machine if these conditions are met:</p>\n<ul class=\"simple\">\n<li><p>PyAEDT is installed on client and server machines. (There is no need to have AEDT\ninstalled on the client machine.)</p></li>\n<li><p>The same Python version is used on the client and server machines. (CPython 3.7+ or\nIronPython is embedded in the AEDT installation.)</p></li>\n</ul>\n<section id=\"grpc-connection-in-aedt-2022-r2-and-later\">\n<h2>gRPC connection in AEDT 2022 R2 and later<a class=\"headerlink\" href=\"#grpc-connection-in-aedt-2022-r2-and-later\" title=\"Permalink to this heading\">#</a></h2>\n<p>In AEDT 2022 R2 and later, PyAEDT fully supports the gRPC API (except for EDB):</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># Launch the latest installed version of AEDT in graphical mode.</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pyaedt</span> <span class=\"kn\">import</span> <span class=\"n\">Hfss</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pyaedt</span> <span class=\"kn\">import</span> <span class=\"n\">settings</span>\n<span class=\"n\">settings</span><span class=\"o\">.</span><span class=\"n\">use_grpc_api</span><span class=\"o\">=</span><span class=\"kc\">True</span>\n<span class=\"n\">hfss</span> <span class=\"o\">=</span> <span class=\"n\">Hfss</span><span class=\"p\">(</span><span class=\"n\">machine</span><span class=\"o\">=</span><span class=\"s2\">&quot;fullmachinename&quot;</span><span class=\"p\">,</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"n\">portnumber</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If the <code class=\"docutils literal notranslate\"><span class=\"pre\">machine</span></code> argument is provided and the machine is a remote machine, AEDT\nmust be up and running on the remote server listening on the specified port <code class=\"docutils literal notranslate\"><span class=\"pre\">portnumber</span></code>.</p>\n<p>To start AEDT in listening mode on the remote machine:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">ANSYSEM</span><span class=\"o\">/</span><span class=\"n\">v222</span><span class=\"o\">/</span><span class=\"n\">Win64</span><span class=\"o\">/</span><span class=\"n\">ansysedt</span><span class=\"o\">.</span><span class=\"n\">exe</span> <span class=\"o\">-</span><span class=\"n\">grpcsrv</span> <span class=\"n\">portnumber</span>  <span class=\"c1\">#windows</span>\n<span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">ANSYSEM</span><span class=\"o\">/</span><span class=\"n\">v222</span><span class=\"o\">/</span><span class=\"n\">Lin64</span><span class=\"o\">/</span><span class=\"n\">ansysedt</span> <span class=\"o\">-</span><span class=\"n\">grpcsrv</span> <span class=\"n\">portnumber</span>   <span class=\"c1\">#linux</span>\n</pre></div>\n</div>\n<p>If the connection is local, the <code class=\"docutils literal notranslate\"><span class=\"pre\">machine</span></code> argument must be left empty. PyAEDT then\nstarts the AEDT session automatically. Machine and port arguments are available to\nall applications except EDB.</p>\n</section>\n<section id=\"pyaedt-remote-service-manager\">\n<h2>PyAEDT remote service manager<a class=\"headerlink\" href=\"#pyaedt-remote-service-manager\" title=\"Permalink to this heading\">#</a></h2>\n<p>PyAEDT includes a service manager that can be run on the server machine and can be\nlaunched on-demand in AEDT sessions and act as a file manager.\nYou can make a remote application call on a CPython server\nor any Windows client machine in AEDT 2022 R2 and later.</p>\n<p>On a CPython Server run the <code class=\"docutils literal notranslate\"><span class=\"pre\">pyaedt_service_manager</span></code> service that listens on port 17878\nfor incoming requests of connections from clients. The port is configurable.\nRequirements:</p>\n<ul class=\"simple\">\n<li><p>Python 3.7+ Virtual Environment.</p></li>\n<li><p>pyaedt &gt; 0.6.0</p></li>\n</ul>\n<p>On Linux, in addition to the preceding requirements, these environments are needed:\n- You can use the CPython version in the AEDT installation folder if you first\nadd the Python library folder to the <code class=\"docutils literal notranslate\"><span class=\"pre\">LD_LIBRARY_PATH</span></code> environment variable.\n- You can use the Python 3.7 or later version that is installed.\n- You can export <code class=\"docutils literal notranslate\"><span class=\"pre\">ANSYSEM_ROOT222=/path/to/AnsysEM/v222/Linux64</span></code>.\n- You can export <code class=\"docutils literal notranslate\"><span class=\"pre\">LD_LIBRARY_PATH=$ANSYSEM_ROOT222/common/mono/Linux64/lib:$ANSYSEM_ROOT222/Delcross:$LD_LIBRARY_PATH</span></code>.</p>\n<p>On the server, the <code class=\"docutils literal notranslate\"><span class=\"pre\">pyaedt_service_manager</span></code> service listen for incoming connections:</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># Launch PyAEDT remote server on CPython</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pyaedt.common_rpc</span> <span class=\"kn\">import</span> <span class=\"n\">pyaedt_service_manager</span>\n<span class=\"n\">pyaedt_service_manager</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>On any client machine, the user must establish the connection as shown in following example.\nAEDT can be launched directly while creating the session or after the connection is established.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pyaedt.common_rpc</span> <span class=\"kn\">import</span> <span class=\"n\">create_session</span>\n<span class=\"c1\"># User can establish the connection and start a new AEDT session</span>\n<span class=\"n\">cl1</span> <span class=\"o\">=</span> <span class=\"n\">create_session</span><span class=\"p\">(</span><span class=\"s2\">&quot;server_name&quot;</span><span class=\"p\">,</span> <span class=\"n\">launch_aedt_on_server</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">aedt_port</span><span class=\"o\">=</span><span class=\"mi\">17880</span><span class=\"p\">,</span> <span class=\"n\">non_graphical</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Optionally AEDT can be launched after the connection is established</span>\n<span class=\"n\">cl2</span> <span class=\"o\">=</span> <span class=\"n\">create_session</span><span class=\"p\">(</span><span class=\"s2\">&quot;server_name&quot;</span><span class=\"p\">,</span> <span class=\"n\">launch_aedt_on_server</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"n\">cl2</span><span class=\"o\">.</span><span class=\"n\">aedt</span><span class=\"p\">(</span><span class=\"n\">port</span><span class=\"o\">=</span><span class=\"mi\">17880</span><span class=\"p\">,</span> <span class=\"n\">non_graphical</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Once AEDT is started then user can connect an application to it.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">hfss</span> <span class=\"o\">=</span> <span class=\"n\">Hfss</span><span class=\"p\">(</span><span class=\"n\">machine</span><span class=\"o\">=</span><span class=\"n\">cl1</span><span class=\"o\">.</span><span class=\"n\">server_name</span><span class=\"p\">,</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"n\">cl1</span><span class=\"o\">.</span><span class=\"n\">aedt_port</span><span class=\"p\">)</span>\n<span class=\"c1\"># your code here</span>\n</pre></div>\n</div>\n<p>The client can be used also to upload or download files from the server.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">cl1</span><span class=\"o\">.</span><span class=\"n\">filemanager</span><span class=\"o\">.</span><span class=\"n\">upload</span><span class=\"p\">(</span><span class=\"n\">local_path</span><span class=\"p\">,</span> <span class=\"n\">remote_path</span><span class=\"p\">)</span>\n<span class=\"n\">file_content</span> <span class=\"o\">=</span> <span class=\"n\">cl1</span><span class=\"o\">.</span><span class=\"n\">open_file</span><span class=\"p\">(</span><span class=\"n\">remote_file</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n</section>\n", "metatags": "<meta name=\"generator\" content=\"Docutils 0.19: https://docutils.sourceforge.io/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["User_guide/index", "User guide", "N", "next"], ["Getting_started/Installation", "Installation", "P", "previous"]], "sourcename": "Getting_started/ClientServer.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Client-server</a><ul>\n<li><a class=\"reference internal\" href=\"#grpc-connection-in-aedt-2022-r2-and-later\">gRPC connection in AEDT 2022 R2 and later</a></li>\n<li><a class=\"reference internal\" href=\"#pyaedt-remote-service-manager\">PyAEDT remote service manager</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "Getting_started/ClientServer", "sidebars": ["search-field.html", "sidebar-nav-bs.html"], "customsidebar": null, "alabaster_version": "0.7.12", "theme_show_toc_level": 1, "theme_logo": {}}