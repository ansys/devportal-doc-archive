{"parents": [{"link": "../../", "title": "Examples"}, {"link": "../", "title": "Circuit examples"}], "prev": {"link": "../Reports/", "title": "Circuit: automatic report creation"}, "next": {"link": "../../07-TwinBuilder/", "title": "Twin Builder examples"}, "title": "Circuit: Touchstone file management", "meta": null, "body": "<div class=\"sphx-glr-download-link-note admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Click <a class=\"reference internal\" href=\"#sphx-glr-download-examples-07-circuit-touchstone-management-py\"><span class=\"std std-ref\">here</span></a>\nto download the full example code</p>\n</div>\n<section class=\"sphx-glr-example-title\" id=\"circuit-touchstone-file-management\">\n<span id=\"sphx-glr-examples-07-circuit-touchstone-management-py\"></span><h1>Circuit: Touchstone file management<a class=\"headerlink\" href=\"#circuit-touchstone-file-management\" title=\"Permalink to this heading\">#</a></h1>\n<p>This example shows how you can use objects in a Touchstone file without opening AEDT.</p>\n<p>To provide the advanced postprocessing features needed for this example, Matplotlib and NumPy\nmust be installed on your machine.</p>\n<p>This example runs only on Windows using CPython.</p>\n<section id=\"perform-required-imports\">\n<h2>Perform required imports<a class=\"headerlink\" href=\"#perform-required-imports\" title=\"Permalink to this heading\">#</a></h2>\n<p>Perform required imports and set the local path to the path for PyAEDT.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pyaedt</span> <span class=\"kn\">import</span> <span class=\"n\">downloads</span>\n\n<span class=\"n\">example_path</span> <span class=\"o\">=</span> <span class=\"n\">downloads</span><span class=\"o\">.</span><span class=\"n\">download_touchstone</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</section>\n<section id=\"import-libraries-and-touchstone-file\">\n<h2>Import libraries and Touchstone file<a class=\"headerlink\" href=\"#import-libraries-and-touchstone-file\" title=\"Permalink to this heading\">#</a></h2>\n<p>Import Matplotlib, NumPy, and the Touchstone file.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">matplotlib.pyplot</span> <span class=\"k\">as</span> <span class=\"nn\">plt</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pyaedt.generic.TouchstoneParser</span> <span class=\"kn\">import</span> <span class=\"p\">(</span>\n    <span class=\"n\">read_touchstone</span><span class=\"p\">,</span>\n    <span class=\"n\">get_return_losses</span><span class=\"p\">,</span>\n    <span class=\"n\">get_insertion_losses_from_prefix</span><span class=\"p\">,</span>\n    <span class=\"n\">get_fext_xtalk_from_prefix</span><span class=\"p\">,</span>\n    <span class=\"n\">get_next_xtalk</span><span class=\"p\">,</span>\n    <span class=\"n\">get_worst_curve_from_solution_data</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"read-touchstone-file\">\n<h2>Read Touchstone file<a class=\"headerlink\" href=\"#read-touchstone-file\" title=\"Permalink to this heading\">#</a></h2>\n<p>Read the Touchstone file.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">read_touchstone</span><span class=\"p\">(</span><span class=\"n\">example_path</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"get-curve-names\">\n<h2>Get curve names<a class=\"headerlink\" href=\"#get-curve-names\" title=\"Permalink to this heading\">#</a></h2>\n<p>Get the curve names. The following code shows how to get lists of the return losses,\ninsertion losses, fext, and next based on a few inputs and port names.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">rl_list</span> <span class=\"o\">=</span> <span class=\"n\">get_return_losses</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">ports</span><span class=\"p\">)</span>\n<span class=\"n\">il_list</span> <span class=\"o\">=</span> <span class=\"n\">get_insertion_losses_from_prefix</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">ports</span><span class=\"p\">,</span> <span class=\"s2\">&quot;U1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;U7&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">fext_list</span> <span class=\"o\">=</span> <span class=\"n\">get_fext_xtalk_from_prefix</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">ports</span><span class=\"p\">,</span> <span class=\"s2\">&quot;U1&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;U7&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">next_list</span> <span class=\"o\">=</span> <span class=\"n\">get_next_xtalk</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">ports</span><span class=\"p\">,</span> <span class=\"s2\">&quot;U1&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"get-curve-worst-cases\">\n<h2>Get curve worst cases<a class=\"headerlink\" href=\"#get-curve-worst-cases\" title=\"Permalink to this heading\">#</a></h2>\n<p>Get curve worst cases.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">worst_rl</span><span class=\"p\">,</span> <span class=\"n\">global_mean</span> <span class=\"o\">=</span> <span class=\"n\">get_worst_curve_from_solution_data</span><span class=\"p\">(</span>\n    <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">freq_min</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">freq_max</span><span class=\"o\">=</span><span class=\"mi\">20</span><span class=\"p\">,</span> <span class=\"n\">worst_is_higher</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">curve_list</span><span class=\"o\">=</span><span class=\"n\">rl_list</span>\n<span class=\"p\">)</span>\n<span class=\"n\">worst_il</span><span class=\"p\">,</span> <span class=\"n\">mean2</span> <span class=\"o\">=</span> <span class=\"n\">get_worst_curve_from_solution_data</span><span class=\"p\">(</span>\n    <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">freq_min</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">freq_max</span><span class=\"o\">=</span><span class=\"mi\">20</span><span class=\"p\">,</span> <span class=\"n\">worst_is_higher</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"n\">curve_list</span><span class=\"o\">=</span><span class=\"n\">il_list</span>\n<span class=\"p\">)</span>\n<span class=\"n\">worst_fext</span><span class=\"p\">,</span> <span class=\"n\">mean3</span> <span class=\"o\">=</span> <span class=\"n\">get_worst_curve_from_solution_data</span><span class=\"p\">(</span>\n    <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">freq_min</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">freq_max</span><span class=\"o\">=</span><span class=\"mi\">20</span><span class=\"p\">,</span> <span class=\"n\">worst_is_higher</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">curve_list</span><span class=\"o\">=</span><span class=\"n\">fext_list</span>\n<span class=\"p\">)</span>\n<span class=\"n\">worst_next</span><span class=\"p\">,</span> <span class=\"n\">mean4</span> <span class=\"o\">=</span> <span class=\"n\">get_worst_curve_from_solution_data</span><span class=\"p\">(</span>\n    <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">freq_min</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">freq_max</span><span class=\"o\">=</span><span class=\"mi\">20</span><span class=\"p\">,</span> <span class=\"n\">worst_is_higher</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">curve_list</span><span class=\"o\">=</span><span class=\"n\">next_list</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n</section>\n<section id=\"plot-curves-using-matplotlib\">\n<h2>Plot curves using Matplotlib<a class=\"headerlink\" href=\"#plot-curves-using-matplotlib\" title=\"Permalink to this heading\">#</a></h2>\n<p>Plot the curves using Matplotlib.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">fig</span><span class=\"p\">,</span> <span class=\"n\">ax</span> <span class=\"o\">=</span> <span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">subplots</span><span class=\"p\">(</span><span class=\"n\">figsize</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">20</span><span class=\"p\">,</span> <span class=\"mi\">10</span><span class=\"p\">))</span>\n<span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">xlabel</span><span class=\"o\">=</span><span class=\"s2\">&quot;Frequency (Hz)&quot;</span><span class=\"p\">,</span> <span class=\"n\">ylabel</span><span class=\"o\">=</span><span class=\"s2\">&quot;Return Loss (dB)&quot;</span><span class=\"p\">,</span> <span class=\"n\">title</span><span class=\"o\">=</span><span class=\"s2\">&quot;Return Loss&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">grid</span><span class=\"p\">()</span>\n<span class=\"n\">mag_data</span> <span class=\"o\">=</span> <span class=\"mi\">20</span> <span class=\"o\">*</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">log10</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">solutions_data_mag</span><span class=\"p\">[</span><span class=\"n\">worst_rl</span><span class=\"p\">]))</span>\n<span class=\"n\">freq_data</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"n\">i</span> <span class=\"o\">*</span> <span class=\"mf\">1e9</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">sweeps</span><span class=\"p\">[</span><span class=\"s2\">&quot;Freq&quot;</span><span class=\"p\">]])</span>\n<span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">freq_data</span><span class=\"p\">,</span> <span class=\"n\">mag_data</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"n\">worst_rl</span><span class=\"p\">)</span>\n<span class=\"n\">mag_data2</span> <span class=\"o\">=</span> <span class=\"mi\">20</span> <span class=\"o\">*</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">log10</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">solutions_data_mag</span><span class=\"p\">[</span><span class=\"n\">worst_il</span><span class=\"p\">]))</span>\n<span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">freq_data</span><span class=\"p\">,</span> <span class=\"n\">mag_data2</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"n\">worst_il</span><span class=\"p\">)</span>\n<span class=\"n\">mag_data3</span> <span class=\"o\">=</span> <span class=\"mi\">20</span> <span class=\"o\">*</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">log10</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">solutions_data_mag</span><span class=\"p\">[</span><span class=\"n\">worst_fext</span><span class=\"p\">]))</span>\n<span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">freq_data</span><span class=\"p\">,</span> <span class=\"n\">mag_data3</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"n\">worst_fext</span><span class=\"p\">)</span>\n<span class=\"n\">mag_data4</span> <span class=\"o\">=</span> <span class=\"mi\">20</span> <span class=\"o\">*</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">log10</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">solutions_data_mag</span><span class=\"p\">[</span><span class=\"n\">worst_next</span><span class=\"p\">]))</span>\n<span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">freq_data</span><span class=\"p\">,</span> <span class=\"n\">mag_data4</span><span class=\"p\">,</span> <span class=\"n\">label</span><span class=\"o\">=</span><span class=\"n\">worst_next</span><span class=\"p\">)</span>\n<span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">legend</span><span class=\"p\">(</span>\n    <span class=\"p\">[</span><span class=\"s2\">&quot;Worst RL = &quot;</span> <span class=\"o\">+</span> <span class=\"n\">worst_rl</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Worst IL = &quot;</span> <span class=\"o\">+</span> <span class=\"n\">worst_il</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Worst FEXT = &quot;</span> <span class=\"o\">+</span> <span class=\"n\">worst_fext</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Worst NEXT = &quot;</span> <span class=\"o\">+</span> <span class=\"n\">worst_next</span><span class=\"p\">]</span>\n<span class=\"p\">)</span>\n<span class=\"n\">plt</span><span class=\"o\">.</span><span class=\"n\">show</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<img src=\"../../_images/sphx_glr_Touchstone_Management_001.png\" srcset=\"../../_images/sphx_glr_Touchstone_Management_001.png\" alt=\"Return Loss\" class = \"sphx-glr-single-img\"/><p class=\"sphx-glr-timing\"><strong>Total running time of the script:</strong> ( 0 minutes  0.344 seconds)</p>\n<div class=\"sphx-glr-footer sphx-glr-footer-example docutils container\" id=\"sphx-glr-download-examples-07-circuit-touchstone-management-py\">\n<div class=\"sphx-glr-download sphx-glr-download-python docutils container\">\n<p><a class=\"reference download internal\" download=\"\" href=\"../../../_downloads/f504f5245f52f3418c6eebf54c05d04d/Touchstone_Management.py\"><code class=\"xref download docutils literal notranslate\"><span class=\"pre\">Download</span> <span class=\"pre\">Python</span> <span class=\"pre\">source</span> <span class=\"pre\">code:</span> <span class=\"pre\">Touchstone_Management.py</span></code></a></p>\n</div>\n<div class=\"sphx-glr-download sphx-glr-download-jupyter docutils container\">\n<p><a class=\"reference download internal\" download=\"\" href=\"../../../_downloads/e3584d7336a7c1752249436c082b24dd/Touchstone_Management.ipynb\"><code class=\"xref download docutils literal notranslate\"><span class=\"pre\">Download</span> <span class=\"pre\">Jupyter</span> <span class=\"pre\">notebook:</span> <span class=\"pre\">Touchstone_Management.ipynb</span></code></a></p>\n</div>\n</div>\n<p class=\"sphx-glr-signature\"><a class=\"reference external\" href=\"https://sphinx-gallery.github.io\">Gallery generated by Sphinx-Gallery</a></p>\n</section>\n</section>\n", "metatags": "<meta name=\"generator\" content=\"Docutils 0.19: https://docutils.sourceforge.io/\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["examples/07-TwinBuilder/index", "Twin Builder examples", "N", "next"], ["examples/07-Circuit/Reports", "Circuit: automatic report creation", "P", "previous"]], "sourcename": "examples/07-Circuit/Touchstone_Management.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Circuit: Touchstone file management</a><ul>\n<li><a class=\"reference internal\" href=\"#perform-required-imports\">Perform required imports</a></li>\n<li><a class=\"reference internal\" href=\"#import-libraries-and-touchstone-file\">Import libraries and Touchstone file</a></li>\n<li><a class=\"reference internal\" href=\"#read-touchstone-file\">Read Touchstone file</a></li>\n<li><a class=\"reference internal\" href=\"#get-curve-names\">Get curve names</a></li>\n<li><a class=\"reference internal\" href=\"#get-curve-worst-cases\">Get curve worst cases</a></li>\n<li><a class=\"reference internal\" href=\"#plot-curves-using-matplotlib\">Plot curves using Matplotlib</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "examples/07-Circuit/Touchstone_Management", "sidebars": ["search-field.html", "sidebar-nav-bs.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.12", "theme_show_toc_level": 1, "theme_logo": {}}